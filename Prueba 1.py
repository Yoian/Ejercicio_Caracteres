from numpy import exp

A=[[0,0,1,0,0],  #Datos de entrada para A
[0,1,0,1,0],
[1,0,0,0,1],
[1,0,0,0,1],
[1,1,1,1,1],
[1,0,0,0,1],
[1,0,0,0,1]]

B=[[1,1,1,1,0],  #Datos de entrada para B
[1,0,0,0,1],
[1,0,0,0,1],
[1,1,1,1,0],
[1,0,0,0,1],
[1,0,0,0,1],
[1,1,1,1,0]]

C=[[0,1,1,1,0],  #Datos de entrada para C
[1,0,0,0,1],
[1,0,0,0,0],
[1,0,0,0,0],
[1,0,0,0,0],
[1,0,0,0,1],
[0,1,1,1,0]]

D=[[1,1,1,1,0],  #Datos de entrada para D
[1,0,0,0,1],
[1,0,0,0,1],
[1,0,0,0,1],
[1,0,0,0,1],
[1,0,0,0,1],
[1,1,1,1,0]]

E=[[1,1,1,1,1],  #Datos de entrada para E
[1,0,0,0,0],
[1,0,0,0,0],
[1,1,1,1,0],
[1,0,0,0,0],
[1,0,0,0,0],
[1,1,1,1,1]]

F=[[1,1,1,1,1],  #Datos de entrada para F
[1,0,0,0,0],
[1,0,0,0,0],
[1,1,1,1,0],
[1,0,0,0,0],
[1,0,0,0,0],
[1,0,0,0,0]]

G=[[0,1,1,1,1],  #Datos de entrada para G
[1,0,0,0,1],
[1,0,0,0,0],
[1,0,0,0,0],
[1,0,0,1,1],
[1,0,0,0,1],
[0,1,1,1,1]]

H=[[1,0,0,0,1],  #Datos de entrada para H
[1,0,0,0,1],
[1,0,0,0,1],
[1,1,1,1,1],
[1,0,0,0,1],
[1,0,0,0,1],
[1,0,0,0,1]]

I=[[0,1,1,1,0],  #Datos de entrada para I
[0,0,1,0,0],
[0,0,1,0,0],
[0,0,1,0,0],
[0,0,1,0,0],
[0,0,1,0,0],
[0,1,1,1,0]]

J=[[0,0,0,0,1],  #Datos de entrada para J
[0,0,0,0,1],
[0,0,0,0,1],
[0,0,0,0,1],
[0,0,0,0,1],
[1,0,0,0,1],
[0,1,1,1,0]]

K=[[1,0,0,0,1],  #Datos de entrada para K
[1,0,0,1,0],
[1,0,1,0,0],
[1,1,0,0,0],
[1,0,1,0,0],
[1,0,0,1,0],
[1,0,0,0,1]]

L=[[1,0,0,0,0],  #Datos de entrada para L
[1,0,0,0,0],
[1,0,0,0,0],
[1,0,0,0,0],
[1,0,0,0,0],
[1,0,0,0,0],
[1,1,1,1,1]]

M=[[1,0,0,0,1],  #Datos de entrada para M
[1,1,0,1,1],
[1,0,1,0,1],
[1,0,1,0,1],
[1,0,0,0,1],
[1,0,0,0,1],
[1,0,0,0,1]]

N=[[1,0,0,0,1],  #Datos de entrada para N
[1,0,0,0,1],
[1,1,0,0,1],
[1,0,1,0,1],
[1,0,0,1,1],
[1,0,0,0,1],
[1,0,0,0,1]]

O=[[0,1,1,1,0],  #Datos de entrada para O
[1,0,0,0,1],
[1,0,0,0,1],
[1,0,0,0,1],
[1,0,0,0,1],
[1,0,0,0,1],
[0,1,1,1,0]]

P=[[1,1,1,1,0],  #Datos de entrada para P
[1,0,0,0,1],
[1,0,0,0,1],
[1,0,0,0,1],
[1,1,1,1,0],
[1,0,0,0,1],
[1,0,0,0,1]]

WN1=[[0.1,0.2,0.45,0.1,0.3],  #Pesos de los axones de la primer neurona
[0.1,0.1,0.3,0.2,0.2],
[0.3,0.3,0.1,0.2,0.1],
[0.1,0.2,0.2,0.1,0.4],
[0.2,0.2,0.1,0.2,0.2],
[0.2,0.1,0.3,0.1,0.1],
[0.1,0.2,0.2,0.2,0.1]]

WN2=[[0.1,0.1,0.4,0.1,0.3],  #Pesos de los axones de la segunda neurona
[0.1,0.2,0.3,0.2,0.2],
[0.2,0.3,0.1,0.2,0.1],
[0.1,0.2,0.1,0.1,0.4],
[0.3,0.2,0.1,0.3,0.2],
[0.2,0.1,0.3,0.1,0.1],
[0.1,0.1,0.2,0.4,0.1]]

WN3=[[0.1,0.2,0.2,0.1,0.3],  #Pesos de los axones de la tercera neurona
[0.1,0.3,0.3,0.2,0.2],
[0.3,0.3,0.1,0.2,0.1],
[0.1,0.2,0.5,0.1,0.4],
[0.1,0.2,0.1,0.2,0.2],
[0.2,0.1,0.3,0.1,0.1],
[0.1,0.4,0.2,0.2,0.1]]

WNH=[WN1,WN2,WN3]

WNF=[0.1,-0.3,-0.2]  #Pesos de los axones de la Ãºltima neurona

e=2.71828
alpha=0.001
iteraciones=100
Tk=0
ysf=5
f=1
#for it in range(iteraciones):
while (((Tk-ysf)**2)/2)>0.005:
    f+=1
    y1=0
    y2=0
    y3=0
    for i in range(len(A)):
        for j in range(len(A[i])):
            y1+=WN1[i][j]*A[i][j]
            y2+=WN2[i][j]*A[i][j]
            y3+=WN3[i][j]*A[i][j]

    ys1=1/(1+exp(-y1))
    ys2=1/(1+exp(-y2))
    ys3=1/(1+exp(-y3))

    ysh=[ys1,ys2,ys3]

    yf=0
    for i in range(len(ysh)):
        yf+=ysh[i]*WNF[i]

    ysf=1/(1+exp(-yf))
    
    DC=ysf*(1-ysf)*(Tk-ysf)

    for Nh in range(len(ysh)):
        DH=ysh[Nh]*(1-ysh[Nh])*(WNF[Nh]*DC)
        for i in range(len(A)):
            for j in range(len(A[i])):
                WNH[Nh][i][j]=WNH[Nh][i][j]+(alpha*A[i][j]*DH)
    
    for i in range(len(WNF)):
        WNF[i]=WNF[i]+(alpha*ysh[i]*DC)

print("fin")